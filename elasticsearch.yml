---
# Cluster settings
cluster.name: "wp-search"
node.name: "wp-search-node"

# Network settings
network.host: 0.0.0.0
http.port: 9200

# Security settings
xpack.security.enabled: true
xpack.security.transport.ssl.enabled: true
xpack.security.transport.ssl.verification_mode: certificate
xpack.security.transport.ssl.keystore.path: elastic-certificates.p12
xpack.security.transport.ssl.truststore.path: elastic-certificates.p12

# Memory settings
bootstrap.memory_lock: true

# Path settings
path.data: /usr/share/elasticsearch/data
path.logs: /usr/share/elasticsearch/logs

# Discovery settings
discovery.type: single-node

# Resource management
indices.query.bool.max_clause_count: 1024
search.max_buckets: 10000

# Memory and cache settings
indices.memory.index_buffer_size: 30%
indices.requests.cache.size: 2%
indices.fielddata.cache.size: 20%
indices.recovery.max_bytes_per_sec: 50mb

# Search performance
search.default_search_timeout: 30s
indices.queries.cache.size: 5%
search.allow_expensive_queries: false

# Indexing performance
thread_pool.write.size: 4
thread_pool.write.queue_size: 1000
indices.memory.min_index_buffer_size: 96mb

# Query performance
indices.max_shards_per_node: 1000
indices.query.bool.max_nested_depth: 12

# Analysis settings
analysis.analyzer.default.type: standard
analysis.analyzer.default.stopwords: _english_

# Circuit breaker settings
indices.breaker.total.limit: 70%
indices.breaker.request.limit: 60%
indices.breaker.fielddata.limit: 40%

# Recovery settings
cluster.routing.allocation.node_concurrent_recoveries: 2
cluster.routing.allocation.node_initial_primaries_recoveries: 4
indices.recovery.max_concurrent_file_chunks: 2

# Merge performance
index.merge.scheduler.max_thread_count: 4
index.merge.policy.floor_segment: 2mb
index.merge.policy.max_merge_at_once: 10
index.merge.policy.segments_per_tier: 10

# Refresh and flush settings
index.refresh_interval: 10s
indices.memory.max_index_buffer_size: 512mb

# Translog settings
index.translog.durability: async
index.translog.sync_interval: 5s
index.translog.flush_threshold_size: 256mb